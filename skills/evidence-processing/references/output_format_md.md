# 処理/ マークダウンファイル フォーマット仕様

## ファイル命名規則

```
{番号}_{内容}.md
```

- 番号は処理順序を示す 2桁の数字（01, 02, ... 07）
- 同一番号でサブカテゴリがある場合はアルファベットを付与（05a, 05b, ...）
- 内容は日本語でファイルの中身を端的に表す

## 書き起こしファイル (01-05)

### 構造

```markdown
# {タイトル}（{年度}年度）

## {セクション名}

| 列1 | 列2 | 列3 | ... |
| --- | --- | --- | --- |
| データ | データ | データ | ... |
```

### 金額表記

- テーブル内の金額はカンマ区切りなし（数値として扱いやすくするため）
- 本文中の金額はカンマ区切りあり（可読性のため）

## 仕訳一覧ファイル (07_仕訳一覧.md)

### 必須セクション

#### 1. 会計方針

ワークスペースの `accounting-policy.md` の「仕訳ルール」セクションの内容を転記する。
accounting-policy.md が存在しない場合はユーザーに会計方針を確認して記載する。

#### 2. 勘定科目一覧

`md_to_json.py` がこのテーブルを参照して科目名 → entity_id のマッピングを構築する。

```markdown
## 勘定科目一覧

| 科目名 | entity_id | 種別 |
| --- | ---: | --- |
| 現金 | 20006 | asset |
| 売掛金 | 10018 | asset |
| 売上高 | 15005 | revenue |
| 通信費 | 15338 | expense |
| 事業主借 | 20593 | equity |
| 事業主貸 | 20594 | equity |
```

- `entity_id`: kakutey アプリの勘定科目 entity_id（`kakutey-bookkeeping` の `get_accounts.py` で取得可能）
- `種別`: asset / liability / equity / revenue / expense

#### 3. 仕訳一覧テーブル

```markdown
## 仕訳一覧 ({件数}件)

| No | 日付 | 摘要 | 借方科目 | 貸方科目 | 金額 |
| ---: | --- | --- | --- | --- | ---: |
```

**単一仕訳**（借方1行・貸方1行）:
```
| 1 | 2025-01-01 | サンプル商事 請求 | 売掛金 | 売上高 | 440,000 |
```

**複合仕訳**（借方 or 貸方が複数行）:
```
| 2 | 2025-01-01 | 開始仕訳（前年度末残高の引継ぎ） | 現金 | | 50,000 |
| | | | 普通預金 | | 600,000 |
| | | | | 元入金 | 650,000 |
```

- 先頭行: No, 日付, 摘要 を記載。借方 or 貸方の一方を記載。
- 継続行: No, 日付, 摘要 は空。追加の借方 or 貸方を記載。
- 借方行: 借方科目列に科目名、貸方科目列は空
- 貸方行: 借方科目列は空、貸方科目列に科目名
- 金額はカンマ区切り

#### 4. 勘定科目別集計

```markdown
## 勘定科目別集計（経費）

| 勘定科目 | 合計額 |
| --- | ---: |
| 通信費 | 100,000 |
| 消耗品費 | 50,000 |
| **経費合計** | **150,000** |
```

#### 5. 損益概要

```markdown
## 損益概要

- 売上高: 2,000,000円
- 経費合計: 150,000円
- 差引利益: 1,850,000円
```
